#!/usr/bin/env bash

A=$(git describe --tags --long --match 'v*' | sed -r 's/-g.*//')
if [[ -n "$A" ]] ; then
    N=$(echo "$A" | sed -r 's/^.*-//')
    if [[ $N -eq 0 ]] ; then
        echo "$A" | sed -r 's/-.*//;s/^v//'
        exit 0
    fi
fi

VERSION=$(<"./basetag")
A=$(git describe --tags --long --exclude 'v*' | sed -r 's/-g/+g/')
if [[ -n "$A" ]] ; then
    echo "$A"
    exit 0
fi

exit 1
#.
